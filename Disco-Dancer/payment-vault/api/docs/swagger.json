{
    "swagger": "2.0",
    "info": {
        "description": "Responsible for interacting with GEICO Payment Platform Vault.",
        "title": "GEICO Payment Platform Vault API",
        "contact": {
            "name": "Payment Platform Dev Team",
            "email": "GPP@geico.com"
        },
        "version": "1.0"
    },
    "paths": {
        "/decrypt": {
            "get": {
                "description": "This API decrypts the value passed in the query parameter.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "PaymentVault"
                ],
                "summary": "Get decrypted value.",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Value to be decrypted",
                        "name": "value",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "default": {
                        "description": "Status of the request, errorDetails will be only displayed in case of 4XX or 5XX error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/encrypt": {
            "get": {
                "description": "This API encrypts the value passed in the query parameter.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "PaymentVault"
                ],
                "summary": "Get encrypted value.",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Value to be encrypted",
                        "name": "value",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "default": {
                        "description": "Status of the request, errorDetails will be only displayed in case of 4XX or 5XX error",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/health/ready": {
            "get": {
                "description": "This API returns the Health Check Status of the application",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "HealthCheck"
                ],
                "summary": "HealthCheck of the application",
                "responses": {
                    "default": {
                        "description": "Health Check Results",
                        "schema": {
                            "$ref": "#/definitions/app.HealthCheckResponse"
                        }
                    }
                }
            }
        },
        "/paymentmethod": {
            "post": {
                "description": "This API adds a payment methods, with account related details, for a user, in GEICO Payment Platform.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "PaymentVault"
                ],
                "summary": "Add Payment method.",
                "parameters": [
                    {
                        "description": "Payment Preference method request body that needs to be added",
                        "name": "PaymentMethodRequest",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/app.PaymentMethodRequest"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": "Status of payment method request, errorDetails will be only displayed in case of 4XX or 5XX error",
                        "schema": {
                            "$ref": "#/definitions/app.PaymentMethodResponse"
                        }
                    }
                }
            }
        },
        "/paymentpreference": {
            "get": {
                "description": "This API returns payment preference from GEICO Payment Platform, for a user, based on product, transactionType and Payment Request Type.",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "PaymentVault"
                ],
                "summary": "Get Payment Preference.",
                "parameters": [
                    {
                        "type": "string",
                        "description": "UserId from identity",
                        "name": "userId",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "TransactionType (eg.PayIn,PayOut)",
                        "name": "transactionType",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "PaymentRequestType(eg.CustomerChoice,insuranceautoauctions)",
                        "name": "paymentRequestType",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Product identifier eg.Policy Number",
                        "name": "productIdentifier",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "default": {
                        "description": "Status of get payment preference request, errorDetails will be only displayed in case of 4XX or 5XX error",
                        "schema": {
                            "$ref": "#/definitions/app.PaymentPreferenceResponseList"
                        }
                    }
                }
            },
            "post": {
                "description": "This API adds payment preference for payin and payout, for a user in GEICO Payment Platform.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "PaymentVault"
                ],
                "summary": "Add Payment Preference.",
                "parameters": [
                    {
                        "description": "Payment Preference Request body that needs to be added",
                        "name": "PaymentPreferenceRequest",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/app.PaymentPreferenceRequest"
                        }
                    }
                ],
                "responses": {
                    "default": {
                        "description": "Status of payment preference request, errorDetails will be only displayed in case of 4XX or 5XX error",
                        "schema": {
                            "$ref": "#/definitions/app.StorePaymentPreferenceResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "app.ErrorResponse": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string",
                    "example": "some error happened"
                },
                "type": {
                    "type": "string",
                    "example": "error"
                }
            }
        },
        "app.HealthCheckResponse": {
            "type": "object",
            "properties": {
                "configfilename": {
                    "type": "string",
                    "example": "appsettings.dv.json"
                },
                "data": {},
                "databasestatus": {
                    "type": "string",
                    "example": "Up"
                },
                "error": {
                    "type": "boolean",
                    "example": false
                },
                "errorresponse": {
                    "$ref": "#/definitions/app.ErrorResponse"
                },
                "message": {
                    "type": "string",
                    "example": "I am alive !!"
                },
                "seceretsavailable": {
                    "type": "string",
                    "example": "yes"
                }
            }
        },
        "app.PaymentMethodRequest": {
            "type": "object",
            "properties": {
                "CallerApp": {
                    "type": "string",
                    "example": "mcp"
                },
                "FirstName": {
                    "type": "string",
                    "example": "John"
                },
                "LastName": {
                    "type": "string",
                    "example": "Doe"
                },
                "PaymentMethodType": {
                    "type": "string",
                    "example": "ach"
                },
                "UserID": {
                    "type": "string",
                    "example": "125"
                },
                "paymentMethodDetails": {
                    "$ref": "#/definitions/app.Paymentmethoddetails"
                }
            }
        },
        "app.PaymentMethodResponse": {
            "type": "object",
            "properties": {
                "errordetails": {
                    "$ref": "#/definitions/app.ErrorResponse"
                },
                "paymentmethodid": {
                    "type": "integer",
                    "example": 123456789
                },
                "status": {
                    "type": "string",
                    "example": "ACCEPTED"
                }
            }
        },
        "app.PaymentPreferenceDetail": {
            "type": "object",
            "properties": {
                "AutoPayPreference": {
                    "type": "boolean",
                    "example": true
                },
                "PaymentMethodId": {
                    "type": "integer",
                    "example": 1
                },
                "Split": {
                    "type": "integer",
                    "example": 80
                }
            }
        },
        "app.PaymentPreferenceRequest": {
            "type": "object",
            "properties": {
                "PaymentRequestType": {
                    "type": "string",
                    "example": "enterpriserental"
                },
                "ProductIdentifier": {
                    "type": "string",
                    "example": "ALL"
                },
                "ProductSubType": {
                    "type": "string",
                    "example": "auto"
                },
                "ProductType": {
                    "type": "string",
                    "example": "ppa"
                },
                "UserId": {
                    "type": "string",
                    "example": "125"
                },
                "payIn": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/app.PaymentPreferenceDetail"
                    }
                },
                "payOut": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/app.PaymentPreferenceDetail"
                    }
                }
            }
        },
        "app.PaymentPreferenceResponse": {
            "type": "object",
            "properties": {
                "AccountValidationDate": {
                    "type": "string",
                    "example": "2021-01-01T00:00:00Z"
                },
                "AutoPayPreference": {
                    "type": "boolean",
                    "example": true
                },
                "Last4AccountIdentifier": {
                    "type": "string",
                    "example": "6789"
                },
                "PaymentExtendedData": {
                    "type": "string",
                    "example": "{}"
                },
                "PaymentMethodStatus": {
                    "type": "string",
                    "example": "ACTIVE"
                },
                "RoutingNumber": {
                    "type": "string",
                    "example": "023456789"
                },
                "Split": {
                    "type": "integer",
                    "example": 80
                },
                "Status": {
                    "type": "string",
                    "example": "ACCEPTED"
                },
                "WalletAccess": {
                    "type": "boolean",
                    "example": true
                },
                "WalletStatus": {
                    "type": "boolean",
                    "example": true
                },
                "accountIdentifier": {
                    "type": "string"
                },
                "errorDetails": {
                    "$ref": "#/definitions/app.ErrorResponse"
                },
                "paymentMethodType": {
                    "type": "string"
                }
            }
        },
        "app.PaymentPreferenceResponseList": {
            "type": "object",
            "properties": {
                "PaymentPreferences": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/app.PaymentPreferenceResponse"
                    }
                },
                "errorDetails": {
                    "$ref": "#/definitions/app.ErrorResponse"
                },
                "status": {
                    "type": "string"
                }
            }
        },
        "app.Paymentmethoddetails": {
            "type": "object",
            "properties": {
                "ACHAccountType": {
                    "type": "string",
                    "example": "checking"
                },
                "AccountNumber": {
                    "type": "string",
                    "example": "123456789"
                },
                "CVV": {
                    "type": "string",
                    "example": "123"
                },
                "CardExpirationMonth": {
                    "type": "string",
                    "example": "12"
                },
                "CardExpirationYear": {
                    "type": "string",
                    "example": "2022"
                },
                "CardNumber": {
                    "type": "string",
                    "example": "123456789"
                },
                "NickName": {
                    "type": "string",
                    "example": "John's Account"
                },
                "RoutingNumber": {
                    "type": "string",
                    "example": "023456789"
                },
                "ZipCode": {
                    "type": "string",
                    "example": "12345"
                }
            }
        },
        "app.StorePaymentPreferenceResponse": {
            "type": "object",
            "properties": {
                "errordetails": {
                    "$ref": "#/definitions/app.ErrorResponse"
                },
                "paymentpreferenceid": {
                    "type": "integer",
                    "example": 123456789
                },
                "status": {
                    "type": "string",
                    "example": "ACCEPTED"
                }
            }
        }
    }
}